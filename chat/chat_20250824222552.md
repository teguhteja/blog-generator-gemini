# Chat Log - 24 Agustus 2025, 22:25:52

## Masalah dan Penyelesaian

### 1. Error Path Direktori di main.py
**Masalah:** 
```
❌ Error: Direktori 'prompt' ('prompt/') tidak ditemukan.
```

**Penyebab:** Script `main.py` mencari direktori `prompt` dan `model` di direktori kerja saat ini, bukan relatif terhadap lokasi script.

**Solusi:** Mengubah definisi path di `main.py`:
```python
# Sebelum
PROMPT_DIR = "prompt"
MODEL_DIR = "model"

# Sesudah  
script_dir = os.path.dirname(os.path.abspath(__file__))
PROMPT_DIR = os.path.join(script_dir, "prompt")
MODEL_DIR = os.path.join(script_dir, "model")
```

### 2. Error Path di workflow_steps.py
**Masalah:**
```
❌ Error file tidak ditemukan di Langkah 2: [Errno 2] No such file or directory: 'prompt/prompt_add_seo.md'
```

**Penyebab:** Modul `workflow_steps.py` masih menggunakan path relatif untuk direktori prompt.

**Solusi:** Mengubah definisi `PROMPT_DIR` di `lib/workflow_steps.py`:
```python
# Sebelum
PROMPT_DIR = "prompt"

# Sesudah
_current_dir = os.path.dirname(os.path.abspath(__file__))
_project_root = os.path.dirname(_current_dir)
PROMPT_DIR = os.path.join(_project_root, "prompt")
```

### 3. Error Path di my_generate_blog.py
**Masalah:** Path relatif yang sama di modul `my_generate_blog.py`

**Solusi:** Mengubah semua definisi `PROMPT_DIR` di `lib/my_generate_blog.py`:
```python
# Sebelum
PROMPT_DIR = "prompt"

# Sesudah
_current_dir = os.path.dirname(os.path.abspath(__file__))
_project_root = os.path.dirname(_current_dir)
PROMPT_DIR = os.path.join(_project_root, "prompt")
```

### 4. Error Path di Langkah 6 dan 7
**Masalah:**
```
❌ Terjadi kesalahan saat konversi HTML: [Errno 2] No such file or directory: 'prompt/prompt_convert_md_to_html.md'
❌ File tidak ditemukan: [Errno 2] No such file or directory: 'prompt/prompt_seo_json.md'
```

**Penyebab:** Fungsi `convert_md_to_html` dan `generate_seo_json` di `main.py` masih menggunakan path string literal.

**Solusi:** Mengubah path di `main.py`:
```python
# Untuk langkah 6
prompt_convert_path = os.path.join(script_dir, "prompt", "prompt_convert_md_to_html.md")

# Untuk generate_seo_json function
script_dir = os.path.dirname(os.path.abspath(__file__))
prompt_path = os.path.join(script_dir, "prompt", "prompt_seo_json.md")
```

### 5. Error NameError script_dir
**Masalah:**
```
NameError: name 'script_dir' is not defined
```

**Penyebab:** Variabel `script_dir` tidak didefinisikan dalam fungsi `run_workflow`.

**Solusi:** Menambahkan definisi `script_dir` di awal fungsi `run_workflow`:
```python
def run_workflow(input_path, blog_prompt_path, model_config_path, steps_to_run, seo_keyphrase_choice=None):
    # ...
    load_dotenv()
    
    # Dapatkan direktori script
    script_dir = os.path.dirname(os.path.abspath(__file__))
```

### 6. Error WordPress Credentials
**Masalah:**
```
❌ Error: Missing WordPress credentials in .env file
```

**Penyebab:** Script `wordpress_uploader.py` mencari file `.env` di direktori kerja saat ini, bukan di direktori script.

**Solusi:** Mengubah cara script mencari file `.env`:
```python
def __init__(self, env_file='.env'):
    # Jika env_file adalah path relatif, gunakan direktori script
    if not os.path.isabs(env_file):
        script_dir = os.path.dirname(os.path.abspath(__file__))
        env_file = os.path.join(script_dir, env_file)
    load_dotenv(env_file)
```

## Kesimpulan

Semua masalah disebabkan oleh penggunaan path relatif yang tidak konsisten ketika script dijalankan dari direktori berbeda. Solusinya adalah menggunakan `os.path.dirname(os.path.abspath(__file__))` untuk mendapatkan direktori script dan membuat path absolut dari sana.

Sekarang script dapat dijalankan dari direktori mana pun tanpa masalah path:
```bash
cd /home/teguhteja/Project/BlogProjects/blog-prompt-01/to-do-blog
python ../main.py "Vibe Coding Tipis2 Custom Odoo Kanban [L7lp_kDfLfs].id.txt"
python ../wordpress_uploader.py -f "Vibe Coding Tipis2 Custom Odoo Kanban [L7lp_kDfLfs].id/"
```